{% extends "admin_base.html" %}
{% block admin_content %}
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h3>Управление композициями</h3>
        <a href="{{ url_for('admin_add_composition') }}" class="btn-add" title="Добавить композицию"><i class="bi bi-plus-circle-fill"></i></a>
    </div>
    <table class="admin-table">
        <thead><tr><th>ID</th><th>Название</th><th>Автор</th><th>Длительность</th><th class="actions">Действия</th></tr></thead>
        <tbody>
        {% for composition in compositions %}
            <tr>
                <td>{{ composition.id }}</td>
                <td>{{ composition.title }}</td>
                <td>{{ composition.author_band.name if composition.author_band else 'N/A' }}</td>
                <td>
                    {% if composition.duration %}
                        {{ '%02d:%02d' % (composition.duration // 60, composition.duration % 60) }}
                    {% else %}
                        N/A
                    {% endif %}
                    </td>
                <td class="actions">
                    <a href="{{ url_for('admin_edit_composition', composition_id=composition.id) }}" title="Редактировать"><i class="bi bi-pencil-square"></i></a>
                    <form action="{{ url_for('admin_delete_composition', composition_id=composition.id) }}" method="POST" style="display: inline;" onsubmit="return confirm('Вы уверены?');">
                        <button type="submit" title="Удалить"><i class="bi bi-trash"></i></button>
                    </form>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}