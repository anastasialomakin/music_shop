{% extends "admin_base.html" %}
{% block admin_content %}
<div style="display: flex; justify-content: space-between; align-items: center;">
    <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏</h3>
    <form method="GET" style="margin:0;">
        <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫..." value="{{ q }}">
        <button type="submit">üîç</button>
    </form>
</div>

<table class="admin-table">
    <thead>
        <tr>
            <th>ID</th>
            <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
            <th>–î–∞—Ç–∞</th>
            <th>–°—É–º–º–∞</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
    </thead>
    <tbody>
    {% for order in orders %}
        <tr>
            <td>{{ order.id }}</td>
            <td>{{ order.user.username }}</td>
            <td>{{ order.order_date.strftime('%Y-%m-%d %H:%M') }}</td>
            <td>{{ order.total_amount }}‚ÇΩ</td>
            <td>{{ order.status }}</td>
            <td class="actions">
                <a href="{{ url_for('admin_edit_order', order_id=order.id) }}" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"><i class="bi bi-pencil-square"></i></a>
                <form action="{{ url_for('admin_delete_order', order_id=order.id) }}" method="POST" style="display: inline;" onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã?');">
                    <button type="submit" title="–£–¥–∞–ª–∏—Ç—å"><i class="bi bi-trash"></i></button>
                </form>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>

{% if pagination.pages > 1 %}
<div class="pagination" style="margin-top:20px; display:flex; gap:15px; align-items:center;">
    {% if pagination.has_prev %}
        <a href="{{ url_for('admin_orders', page=pagination.prev_num) }}">&laquo; –ù–∞–∑–∞–¥</a>
    {% endif %}
    <span>–°—Ç—Ä. {{ pagination.page }} –∏–∑ {{ pagination.pages }}</span>
    {% if pagination.has_next %}
        <a href="{{ url_for('admin_orders', page=pagination.next_num) }}">–í–ø–µ—Ä—ë–¥ &raquo;</a>
    {% endif %}
</div>
{% endif %}
{% endblock %}
